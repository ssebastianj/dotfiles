# shellcheck shell=bash

#### =========================== Functions ===================================

# Assume "bash" shell by default
# 1 = bash
# 2 = zsh
# 3 = fish
guessed_shell='1'

guess_shell() {
    if [[ -n "${BASH_VERSION}" ]]; then
        # Assume shell is bash
        guessed_shell='1'
    elif [[ -n "${ZSH_VERSION}" ]]; then
        # Assume shell is zsh
        guessed_shell='2'
    elif [[ -n "${FISH_VERSION}" ]]; then
        # Assume shell is fish
        guessed_shell='3'
    fi
}
# Try to guess shell
guess_shell

is_bash_shell() {
    [[ "${guessed_shell}" == '1' ]]
}

is_zsh_shell() {
    [[ "${guessed_shell}" == '2' ]]
}

is_fish_shell() {
    [[ "${guessed_shell}" == '3' ]]
}

#### ============================ ssebastianj ================================

#### Editor ------------------------------------------------------------------
export EDITOR="vim"

#### Aliases -----------------------------------------------------------------
# shellcheck source=/dev/null
[[ -s "${HOME}/.aliases" ]] && source "${HOME}/.aliases"

#### Root dir for development purposes ---------------------------------------
export DEVDIR="${HOME}/development"

#### Python ------------------------------------------------
export WORKON_HOME="${DEVDIR}/.virtualenvs"
export PYENV_ROOT="${HOME}/.pyenv"
export PATH="${HOME}/.local/bin:${PATH}"
export PATH="${PYENV_ROOT}/bin:${PATH}"

#### Node Version Manager ----------------------------------------------------
autoload -Uz nvm

#### Django ------------------------------------------------------------------
DJANGO_COMPLETION_FILE="${DEVDIR}/django/extras/django_bash_completion"

if [[ -s "${DJANGO_COMPLETION_FILE}" ]]; then
    is_zsh_shell && autoload -Uz bashcompinit && bashcompinit

    # shellcheck source=/dev/null
    source "${DJANGO_COMPLETION_FILE}"
fi

#### Git ---------------------------------------------------------------------
export PATH="${HOME}/.git-contrib:${PATH}"

#### Golang ------------------------------------------------------------------
export GOPATH="${DEVDIR}/gocode"
export PATH="${GOPATH}/bin:${PATH}"

#### Rust --------------------------------------------------------------------
export RUSTUP_HOME="${HOME}/.rustup"
export CARGO_HOME="${HOME}/.cargo"
export PATH="${RUSTUP_HOME}/bin:${CARGO_HOME}/bin:${PATH}"

RUST_GIT_SRC_DIR="${DEVDIR}/rust/src"
if [[ -d "${RUST_GIT_SRC_DIR}" ]]; then
    export RUST_SRC_PATH="${RUST_GIT_SRC_DIR}"
else
    RUST_SYSROOT="$(rustc --print sysroot)"
    export RUST_SRC_PATH="${RUST_SYSROOT}/lib/rustlib/src/rust/src"
fi

#### Pyenv ------------------------------------------------------------------
if command -v pyenv 1>/dev/null 2>&1; then
    eval "$(pyenv init -)"
fi
