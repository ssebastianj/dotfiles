# shellcheck shell=bash

#### =========================== Functions ===================================

# Assume "zsh" shell by default
guessed_shell='zsh'

# Try to guess shell
guess_shell() {
    if [[ -n "${BASH_VERSION}" ]]; then
        # Assume shell is bash
        guessed_shell='bash'
    elif [[ -n "${ZSH_VERSION}" ]]; then
        # Assume shell is zsh
        guessed_shell='zsh'
   fi
}
guess_shell

is_bash_shell() {
    [[ "${guessed_shell}" == 'bash' ]]
}

is_zsh_shell() {
    [[ "${guessed_shell}" == 'zsh' ]]
}

#### Root dir for development purposes ---------------------------------------
export PROJ_ROOT="${HOME}/projects"
export DEMOS_ROOT="${HOME}/demos"

#### Extra -------------------------------------------------------------------
if [[ -r ".extra" ]] && [[ -f ".extra" ]]; then
    # shellcheck source=/dev/null
    source ".extra"
fi

#### Editor ------------------------------------------------------------------
export EDITOR="vim"

### Colors -------------------------------------------------------------------
# Colorize terminal
export LSCOLORS="ExGxBxDxCxEgEdxbxgxcxd"

#### Aliases -----------------------------------------------------------------
# shellcheck source=/dev/null
[[ -s "${HOME}/.aliases" ]] && source "${HOME}/.aliases"

#### Man pages
export MANPAGER="sh -c 'col -bx | bat -l man -p'"

# It might also be necessary to set MANROFFOPT if there are formatting problems.
export MANROFFOPT="-c"

#### Python ------------------------------------------------
export PATH="${HOME}/.local/bin:${PATH}"
export WORKON_HOME="${PROJ_ROOT}/.virtualenvs"

#### Django ------------------------------------------------------------------
DJANGO_COMPLETION_FILE="${PROJ_ROOT}/django/extras/django_bash_completion"

if [[ -s "${DJANGO_COMPLETION_FILE}" ]]; then
    is_zsh_shell && autoload -Uz bashcompinit && bashcompinit

    # shellcheck source=/dev/null
    source "${DJANGO_COMPLETION_FILE}"
fi

#### Git ---------------------------------------------------------------------
export PATH="${HOME}/.git-contrib:${PATH}"

#### Golang ------------------------------------------------------------------
export GOROOT="/usr/local/lib/go"
export GOPATH="${PROJ_ROOT}/go"
export PATH="${GOROOT}/bin:${GOPATH}/bin:${PATH}"

#### Rust --------------------------------------------------------------------
export RUSTUP_HOME="${HOME}/.rustup"
export CARGO_HOME="${HOME}/.cargo"
export PATH="${RUSTUP_HOME}/bin:${CARGO_HOME}/bin:${PATH}"

#### Pyenv ------------------------------------------------------------------
export PYENV_ROOT="${HOME}/.pyenv"
export PATH="${PYENV_ROOT}/bin:${PATH}"

if command -v pyenv 1>/dev/null 2>&1; then
    eval "$(pyenv init -)"
fi

#### Poetry -----------------------------------------------------------------
export POETRY_HOME="${HOME}/.poetry"
export PATH="${POETRY_HOME}/bin:${PATH}"

#### Node Version Manager ----------------------------------------------------
autoload -Uz nvm node npm

#### Incognito ---------------------------------------------------------------
autoload -Uz chrome-incognito

### FZF
# https://github.com/junegunn/fzf
[[ -f ~/.fzf.zsh ]] && source ~/.fzf.zsh
